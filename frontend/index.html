<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>üé© The Sorting Hat | Hogwarts School of Witchcraft and Wizardry</title>
  <meta name="description" content="Step into the magical world of Harry Potter. Let the enchanted Sorting Hat determine your true Hogwarts house.">

  <!-- Magical Favicon -->
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üé©</text></svg>">

  <link rel="stylesheet" href="css/main.css">
  <link rel="stylesheet" href="css/houses.css">
  <link rel="stylesheet" href="css/animations.css">
</head>
<body class="hogwarts-theme">

  <!-- Background -->
  <div class="castle-background"></div>

  <!-- Connection Notice (only shows on remote access) -->
  <div id="connection-notice" class="connection-notice hidden">
    <div class="notice-content">
      <span class="notice-icon">‚ö°</span>
      <p class="notice-text">
        <strong>Magical Notice:</strong> This requires a backend server. Built with love ‚ù§Ô∏è at <a href="https://ai-skillshop-wheelhouse-lightschool.surge.sh" target="_blank" rel="noopener" class="notice-link">Light School</a>. Learn to build anything by joining our <a href="https://ai-skillshop-wheelhouse-lightschool.surge.sh" target="_blank" rel="noopener" class="notice-link">workshop</a> ‚ú®
      </p>
      <button id="dismiss-notice" class="dismiss-notice">‚úï</button>
    </div>
  </div>

  <!-- Main Sorting Chamber -->
  <main class="sorting-chamber">

    <!-- Title -->
    <header class="header">
      <h1 class="title">The Sorting Hat</h1>
      <p class="subtitle">Discover Your House</p>
    </header>

    <!-- Animated Sorting Hat -->
    <div class="sorting-hat-container">
      <svg id="sorting-hat" class="sorting-hat" viewBox="0 0 600 420" xmlns="http://www.w3.org/2000/svg">
        <defs>
          <linearGradient id="hatGradient" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0%" stop-color="#6d4f2c"/>
            <stop offset="100%" stop-color="#3b2613"/>
          </linearGradient>
        </defs>

        <!-- Main hat body -->
        <path
          d="
            M350 25
            C315 35, 300 65, 310 95
            C325 135, 290 165, 270 205
            C245 255, 225 300, 210 335
            C200 360, 225 372, 280 372
            H430
            C480 372, 505 360, 495 335
            C475 290, 445 245, 410 195
            C375 145, 405 100, 380 70
            C365 50, 355 35, 350 25
            Z"
          fill="url(#hatGradient)"
          stroke="#2a1a0a"
          stroke-width="5"
        />

        <!-- Brim -->
        <path
          d="
            M140 355
            C210 380, 320 390, 450 380
            C520 375, 545 355, 530 340
            C505 315, 440 320, 360 325
            C270 330, 200 325, 155 330
            C110 335, 100 345, 140 355
            Z"
          fill="#2a1a0a"
        />

        <!-- Left eye (deep slit) -->
        <path
          d="M255 255
             C275 245, 305 245, 325 255"
          stroke="#1a0f05"
          stroke-width="7"
          fill="none"
          stroke-linecap="round"
        />

        <!-- Right eye -->
        <path
          d="M345 255
             C365 245, 395 245, 415 255"
          stroke="#1a0f05"
          stroke-width="7"
          fill="none"
          stroke-linecap="round"
        />

        <!-- Mouth (heavy expressive fold) -->
        <path
          d="
            M260 295
            C300 330, 360 330, 400 295
            C375 305, 285 305, 260 295
            Z"
          fill="#2a1a0a"
        />

        <!-- Upper face wrinkle -->
        <path
          d="M245 235
             C305 220, 365 220, 425 235"
          stroke="#4a331b"
          stroke-width="4"
          fill="none"
        />

        <!-- Lower wrinkle -->
        <path
          d="M260 325
             C315 340, 360 340, 405 325"
          stroke="#4a331b"
          stroke-width="4"
          fill="none"
        />
      </svg>

      <!-- Thought Bubble -->
      <div class="thought-bubble hidden">
        <div class="thought-pointer"></div>
        <p id="hat-thoughts" class="thought-text"></p>
      </div>
    </div>

    <!-- Input Area (The Stool) -->
    <div class="sorting-stool" id="sorting-stool">

      <!-- Drop Zone -->
      <div id="drop-zone" class="drop-zone">
        <div class="drop-instructions">
          <div class="sparkle">‚ú®</div>
          <p class="large-text">Drag a photo here</p>
          <p class="small-text">or</p>

          <!-- File Input (hidden) -->
          <input type="file" id="file-input" accept="image/*" style="display: none;">

          <button id="file-btn" class="magic-button">
            üìÅ Choose Photo
          </button>

          <button id="webcam-btn" class="magic-button">
            üì∏ Use Camera
          </button>

          <button id="text-btn" class="magic-button">
            ‚úçÔ∏è Describe Something
          </button>
        </div>
      </div>

      <!-- Preview Area -->
      <div id="preview" class="preview hidden"></div>

      <!-- Text Input Area -->
      <div id="text-input-area" class="text-input-area hidden">
        <p class="instruction-text">Tell me what you'd like to sort:</p>
        <textarea id="text-description" class="description-input" placeholder="A red apple, my favorite toy, a sunny day..."></textarea>
        <div class="button-group">
          <button id="text-sort-btn" class="magic-button">Sort It!</button>
          <button id="text-cancel-btn" class="secondary-button">Cancel</button>
        </div>
      </div>

    </div>

    <!-- Loading State -->
    <div id="loading" class="loading hidden">
      <div class="magical-loading">
        <div class="wand-container">
          <div class="wand">‚ú®</div>
        </div>
        <div class="spell-circle"></div>
        <div class="magic-particles">
          <span class="particle">‚ú®</span>
          <span class="particle">‚≠ê</span>
          <span class="particle">‚ú®</span>
          <span class="particle">‚≠ê</span>
          <span class="particle">‚ú®</span>
          <span class="particle">‚≠ê</span>
        </div>
      </div>
      <p class="loading-text magical-text">
        <span class="spell-word">Revelio!</span>
        The Sorting Hat is channeling ancient magic...
      </p>
      <p class="loading-subtext">Transforming you into the wizarding world ‚ú®</p>
    </div>

    <!-- House Reveal -->
    <div id="house-reveal" class="house-reveal hidden">
      <div class="house-content">
        <div class="house-crest" id="house-crest">üè∞</div>
        <h1 class="house-name" id="house-name"></h1>
        <p class="house-quote" id="house-quote"></p>

        <!-- Transformed Image -->
        <div id="transformed-image-container" class="transformed-image-container hidden">
          <p class="transformed-image-title">Your Magical Transformation</p>
          <img id="transformed-image" class="transformed-image" alt="Your sorted item in house style">
        </div>

        <div class="reasoning-container">
          <p class="reasoning" id="reasoning"></p>
        </div>
        <button id="sort-again-btn" class="magic-button large">Sort Something Else!</button>
      </div>
    </div>

  </main>

  <!-- Credits -->
  <footer class="credits">
    <p class="built-with-love">
      Built with love ‚ù§Ô∏è at <a href="https://ai-skillshop-wheelhouse-lightschool.surge.sh" target="_blank" rel="noopener" class="light-school-link">Light School</a>
    </p>
    <p class="learn-more">Learn to build anything by joining our <a href="https://ai-skillshop-wheelhouse-lightschool.surge.sh" target="_blank" rel="noopener" class="workshop-link">workshop</a> ‚ú®</p>
    <p class="disclaimer">Not affiliated with Warner Bros or J.K. Rowling</p>
  </footer>

  <!-- Scripts -->
  <script src="config.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/howler/2.2.4/howler.min.js"></script>
  <script src="js/audio-manager.js"></script>
  <script src="js/api-client.js"></script>
  <script src="js/webcam.js"></script>
  <script src="js/sorting-ceremony.js"></script>
  <script src="js/house-reveal.js"></script>
  <script src="js/app.js"></script>

</body>
</html>
